<!-- index.html
     Landing page for Hospital CMS.
     Allows users to select a role (Admin, Patient, Doctor) and triggers modal-based login/signup flows.
     Header and footer are rendered dynamically via JS (header.js, footer.js).
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <!--  Meta & Basic Setup  -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Select Role | Hospital CMS</title>
    <link rel="icon" type="image/png" href="../assets/images/logo/logo.png">

    <!--  Stylesheets  -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/index.css">

    <!--  Core / Utility Scripts (non-module)  -->
    <!-- (If these files are not yet created, add stubs as needed) -->
    <script src="../js/util.js" defer></script>
    <script src="../js/render.js" defer></script>

    <!--  Component Scripts  -->
    <script src="../js/components/header.js" type="module" defer></script>
    <script src="../js/components/footer.js" type="module" defer></script>
    <script src="../js/components/modals.js" type="module" defer></script>
    <script src="../js/components/loginHandlers.js" type="module" defer></script>

    <!--  (Optional) Additional shared logic can be included here -->
</head>
<body>
<div class="page-container">
    <!-- Header Placeholder (filled by header.js) -->
    <div id="header"></div>

    <main class="main-content" id="mainContent" tabindex="-1">
        <section class="role-selection">
            <h1 class="page-title">Select Your Role</h1>
            <p class="subtitle">Choose how you want to proceed in the Hospital CMS</p>

            <div class="role-buttons">
                <!-- These buttons open modals via loginHandlers / modals.js -->
                <!-- Patient role includes both Login & Signup handled via modals -->
                <button id="patientLogin" class="role-btn">Patient Login</button>
                <button id="patientSignup" class="role-btn">Patient Sign Up</button>
                <button id="doctorLogin" class="role-btn">Doctor Login</button>
                <button id="adminLogin" class="role-btn">Admin Login</button>
            </div>

            <div class="info-block">
                <p>New here? Choose Patient Sign Up to create an account.</p>
                <p>Admins can add doctors after logging in.</p>
            </div>
        </section>
    </main>

    <!-- Footer Placeholder (filled by footer.js) -->
    <div id="footer"></div>
</div>

<!-- Modal Structure (used by modals.js) -->
<div id="modal" class="modal" aria-hidden="true" style="display:none;">
    <div class="modal-overlay" data-close="true"></div>
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <button id="closeModal" class="modal-close" aria-label="Close">&times;</button>
        <div id="modal-body" class="modal-body"><!-- Dynamic content injected here --></div>
    </div>
</div>

<!-- Page-Specific Logic (Optional) -->
<script type="module">
    // index.js inline (can be moved to ../js/pages/index.js if preferred)
    // Provides any additional page-specific enhancements.

    // Focus main content after load for accessibility.
    window.addEventListener("DOMContentLoaded", () => {
      const main = document.getElementById("mainContent");
      if (main) main.focus();
    });

    // Example: If you want to pre-clear any stored roles when landing.
    // localStorage.removeItem("userRole");

    // If header role buttons also exist, duplication is harmless;
    // these central buttons are for quick access on the landing page.
    const ensureModal = (type) => {
      if (typeof window.openModal === "function") {
        window.openModal(type);
      } else {
        console.warn("openModal not yet available.");
      }
    };

    document.getElementById("patientLogin")?.addEventListener("click", () => ensureModal("patientLogin"));
    document.getElementById("patientSignup")?.addEventListener("click", () => ensureModal("patientSignup"));
    document.getElementById("doctorLogin")?.addEventListener("click", () => ensureModal("doctorLogin"));
    document.getElementById("adminLogin")?.addEventListener("click", () => ensureModal("adminLogin"));
</script>
</body>
</html>